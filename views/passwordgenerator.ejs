<div class="pcoded-content">
    <div class="pcoded-inner-content">
        <div class="main-body">
            <div class="page-wrapper">
                <!-- Page-header start -->
                <div class="page-header">
                    <div class="row align-items-end">
                        <div class="col-lg-8">
                            <div class="page-header-title">
                                <div class="d-inline">
                                    <h4>PASSWORD GENERATOR</h4>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="page-header-breadcrumb">
                                <ul class="breadcrumb-title">
                                    <li class="breadcrumb-item">
                                        <a href="/">
                                            <i class="feather icon-home"></i>
                                        </a>
                                    </li>
                                    <li class="breadcrumb-item">
                                        <a href="#!">AI & ML Tools</a>
                                    </li>
                                    <li class="breadcrumb-item">
                                        <a href="/aiagents">
                                            <span class="pcoded-micon">
                                                <i class="feather icon-gitlab"></i>
                                            </span>
                                            AI AGENTS
                                        </a>
                                    </li>
                                    <li class="breadcrumb-item">
                                        <span class="pcoded-micon">
                                            <i class="fa fa-key"></i>
                                        </span>
                                        PASSWORD GENERATOR
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Page-header end -->

                <div class="card-block">
                    <div class="row">
                        <div class="col-xl-4 col-lg-6 col-md-6">
                            <h6 class="sub-title">Password Generator</h6>
                            <p>Set length of password <code>length="25"(default)</code></p>
                            
                            <div class="range-slider">
                                <div class="d-flex justify-content-between">
                                    <span>8</span>
                                    <span>100</span>
                                </div>
                                <input id="passwordLength" type="range" min="8" max="100" value="25" class="custom-range">
                            </div>
                            <div class="text-center mt-2">
                                <span id="lengthValue">Length = 25</span>
                            </div>

                            <div class="mt-3">
                                <label for="entropyToggle">Entropy:</label>
                                <input type="checkbox" id="entropyToggle" checked>
                                <label for="entropyToggle">Selected</label>
                            </div>

                            <h6 class="mt-3">Character Sets (Auto-selected)</h6>
                            <div>
                                <input type="checkbox" id="lowercase" checked disabled>
                                <label for="lowercase">a to z</label>
                            </div>
                            <div>
                                <input type="checkbox" id="uppercase" checked disabled>
                                <label for="uppercase">A to Z</label>
                            </div>
                            <div>
                                <input type="checkbox" id="digits" checked disabled>
                                <label for="digits">0 to 9</label>
                            </div>
                            <h6 class="mt-3">Optional Character Sets</h6>
                            <div>
                                <input type="checkbox" id="specialChars">
                                <label for="specialChars">Special Characters</label>
                            </div>
                            <div>
                                <input type="checkbox" id="allChars">
                                <label for="allChars">All Characters (32-127)</label>
                            </div>
                            
                            <button class="btn btn-primary mt-3" id="generatePassword">Generate Password</button>
                            <div class="mt-3">
                                <h6>Generated Password:</h6>
                                <div id="generatedPassword" class="alert alert-info d-flex justify-content-between align-items-center">
                                    <span id="passwordText">Your password will appear here.</span>
                                    <button class="btn btn-sm btn-secondary" id="copyToClipboard" disabled>Copy</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script type="text/javascript">
    const RNG_PASSWORD = 'https://rng-python-vercel.vercel.app/api';

    $(document).ready(function() {
        $('#passwordLength').on('input', function() {
            const value = $(this).val();
            $('#lengthValue').text(`Length = ${value}`);
        });

        $('#generatePassword').on('click', async function() {
            const length = $('#passwordLength').val();
            const entropy = $('#entropyToggle').is(':checked') ? 1 : 0;

            let charsetOption = 1; // Default option for lowercase, uppercase, and digits
            const hasSpecialChars = $('#specialChars').is(':checked');
            const hasAllChars = $('#allChars').is(':checked');

            // Adjust charsetOption based on selected character sets
            if (hasSpecialChars) {
                charsetOption = 2; // Special characters added
            }
            if (hasAllChars) {
                charsetOption = 3; // All characters from 32 to 127
            }

            try {
                const response = await fetch(`${RNG_PASSWORD}?length=${length}&entropy=${entropy}&charset_option=${charsetOption}`);
                const data = await response.json();

                const password = data.rand_pass || "Error generating password.";
                $('#passwordText').text(password);
                $('#copyToClipboard').prop('disabled', false); // Enable copy button
            } catch (error) {
                $('#passwordText').text("Error generating password.");
                $('#copyToClipboard').prop('disabled', true); // Disable copy button
            }
        });

        $('#copyToClipboard').on('click', function() {
            const password = $('#passwordText').text();

            if (password && password !== "Error generating password.") {
                navigator.clipboard.writeText(password)
                    .then(() => {
                        alert('Password copied to clipboard!');
                    })
                    .catch(err => {
                        console.error('Could not copy password: ', err);
                    });
            } else {
                alert('No password generated to copy.');
            }
        });
    });
</script>

<style>
    .range-slider {
        margin: 15px 0;
    }
    .custom-range {
        width: 100%;
    }
    #lengthValue {
        display: block; /* Ensure it's displayed as a block */
    }
</style>
